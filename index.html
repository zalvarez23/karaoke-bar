<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/kantobar-icon.svg" />
    <link rel="apple-touch-icon" href="/kantobar-icon.svg" />
    <link rel="manifest" href="/manifest.json" />

    <!-- Apple Touch Icons para iOS -->
    <link rel="apple-touch-icon" sizes="180x180" href="/kantobar-icon.svg" />
    <link rel="apple-touch-icon" sizes="152x152" href="/kantobar-icon.svg" />
    <link rel="apple-touch-icon" sizes="144x144" href="/kantobar-icon.svg" />
    <link rel="apple-touch-icon" sizes="120x120" href="/kantobar-icon.svg" />
    <link rel="apple-touch-icon" sizes="114x114" href="/kantobar-icon.svg" />
    <link rel="apple-touch-icon" sizes="76x76" href="/kantobar-icon.svg" />
    <link rel="apple-touch-icon" sizes="72x72" href="/kantobar-icon.svg" />
    <link rel="apple-touch-icon" sizes="60x60" href="/kantobar-icon.svg" />
    <link rel="apple-touch-icon" sizes="57x57" href="/kantobar-icon.svg" />
    <link rel="apple-touch-icon" href="/kantobar-icon.svg" />
    <meta name="theme-color" content="#191720" />
    <meta name="msapplication-navbutton-color" content="#191720" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="KantoBar" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <meta
      name="theme-color"
      content="#191720"
      media="(prefers-color-scheme: dark)"
    />
    <title>KantoBar</title>
  </head>
  <body>
    <div id="root"></div>
    <script>
      // Ocultar UI del navegador en móvil
      if (window.innerHeight <= window.innerWidth) {
        // Landscape mode - ocultar barras
        window.addEventListener("load", function () {
          setTimeout(function () {
            window.scrollTo(0, 1);
          }, 0);
        });
      }

      // Prevenir zoom en doble tap
      let lastTouchEnd = 0;
      document.addEventListener(
        "touchend",
        function (event) {
          const now = new Date().getTime();
          if (now - lastTouchEnd <= 300) {
            event.preventDefault();
          }
          lastTouchEnd = now;
        },
        false
      );

      // Registrar Service Worker para PWA
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", function () {
          navigator.serviceWorker
            .register("/sw.js")
            .then(function (registration) {
              console.log(
                "✅ Service Worker registrado exitosamente:",
                registration.scope
              );
            })
            .catch(function (error) {
              console.log("❌ Error al registrar Service Worker:", error);
            });
        });
      }

      // Prevenir bounce scroll en iOS pero permitir scroll normal
      document.addEventListener(
        "touchstart",
        function (e) {
          const target = e.target;
          const scrollableElement =
            target.closest("[data-scrollable]") ||
            target.closest(".scrollable") ||
            document.body;
          if (scrollableElement) {
            scrollableElement.style.overflow = "auto";
            scrollableElement.style.webkitOverflowScrolling = "touch";
          }
        },
        { passive: true }
      );
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
